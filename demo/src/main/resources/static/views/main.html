<md-content class="d-view md-padding" layout="column">

	<section class="md-padding" layout="row" layout-align="none center">
		<md-button class="md-fab md-primary" aria-label="Home" ng-click="">
            <ng-md-icon icon="home"></ng-md-icon>
        </md-button>
		<h3 class="d-margin-auto-ver" layout="row" layout-wrap><span class="d-padding-5-hor">{{appName}}</span><span class="d-padding-5-hor">- Main Page</span></h3>
	</section>
	
	<md-divider></md-divider>
	
	<section layout="row" layout-align="none center" layout-wrap>
		<md-button class="md-primary" ng-click="goState('details')">DETAILS</md-button>
		<md-button class="md-primary" ng-click="ctrl.getIssues()" >REFRESH</md-button>
		
		<md-autocomplete
			ng-disabled="false"
			md-no-cache="false"
			md-selected-item="ctrl.selectedCategory"
			md-search-text="searchText"
			md-selected-item-change="ctrl.getIssuesByCategory(cat)"
			md-items="cat in ctrl.querySearch(searchText)"
			md-item-text="cat.name"
			md-min-length="0"
			placeholder="Valitse kategoria">
        	<md-item-template>
          		<span md-highlight-text="searchText" md-highlight-flags="^i">{{cat.name}}</span>
        	</md-item-template>
        	<md-not-found>Ei osumia "{{cat.name}}"</md-not-found>
      	</md-autocomplete>
		
		<div flex></div>
		<md-button class="md-icon-button md-primary" aria-label="Login">
        	<ng-md-icon icon="login"></ng-md-icon>
      	</md-button>
      	<md-button class="md-icon-button md-primary" aria-label="Apple">
        	<ng-md-icon icon="apple"></ng-md-icon>
      	</md-button>
      	<md-button class="md-icon-button md-primary" aria-label="Info">
        	<ng-md-icon icon="info"></ng-md-icon>
      	</md-button>
	</section>
	
	<md-divider></md-divider>
	
	<div style="height: 5px;">
		<md-progress-linear ng-if="ctrl.loadingIssues || ctrl.loadingCategories" md-mode="indeterminate"></md-progress-linear>
	</div>
	
	<div flex class="d-scroll-view">
		<section class="md-padding">
		
			<md-list flex>
				<md-list-item ng-repeat="issue in ctrl.issues" ng-click="ctrl.openIssue(issue)">
					<div class="md-list-item-text" layout="column">
            			<h3>{{issue.top_category_name}}</h3>
            			<h4>{{issue.category_name}}</h4>
            			<p>{{issue.subject}}<br>Viimeksi muokattu {{issue.last_modified_time | date : format : timezone}}</p>
         			 </div>
					<md-divider></md-divider>
				</md-list-item>
				<md-subheader layout="row" class="md-no-sticky">
					<h4>{{ctrl.footerText}}</h4>
					<md-button ng-if="ctrl.issuesMeta.next" class="md-primary md-raised" ng-click="ctrl.getNextIssues(ctrl.selectedCategory, ctrl.issuesMeta)">Hae seuraavat</md-button>
				</md-subheader>
			</md-list>
		</section>
	</div>
	
</md-content>